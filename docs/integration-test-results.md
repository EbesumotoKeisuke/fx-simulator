# 結合テスト結果報告書

**テスト実施日**: 2026-01-27
**テスト実施者**:
**テスト対象バージョン**: v1.0

---

## 1. テストサマリー

| 項目 | 件数 |
|------|------|
| 総テストケース数 | 59 |
| 実施済テストケース数 | 14 |
| PASS | 14 |
| FAIL | 0 |
| 未実施 | 45 |

### 優先度別サマリー
| 優先度 | 総数 | PASS | FAIL | 未実施 |
|--------|------|------|------|--------|
| 高 | 42 | 9 | 0 | 33 |
| 中 | 16 | 5 | 0 | 11 |
| 低 | 1 | 0 | 0 | 1 |

### APIテスト実施済み (2026-01-27)
- ENV-003, DATA-002, DATA-003
- SIM-002, SIM-011
- TRADE-001, TRADE-002, TRADE-007, TRADE-011
- RESULT-001 (データ取得), RESULT-002 (自動決済確認)
- ACCOUNT-001, TRADE-005 (エラーハンドリング)

---

## 2. 環境確認テスト

### ENV-001: Docker起動確認
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **備考**:

### ENV-002: フロントエンド接続
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **備考**:

### ENV-003: バックエンド接続
- **結果**: [X] PASS [ ] FAIL [ ] 未実施
- **実施日時**: 2026-01-27
- **備考**: HTTP 200レスポンス確認。Swagger UI正常表示。

### ENV-004: データベース接続
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **備考**:

---

## 3. シミュレーション基本機能テスト

### 3.1 シミュレーション開始

#### SIM-001: 初期表示
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 開始日時入力フィールド表示
  - [ ] 初期資金入力フィールド表示
  - [ ] 速度選択（1x, 5x, 10x）表示
  - [ ] 開始ボタン表示
- **備考**:

#### SIM-002: 開始日時指定
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] シミュレーション開始
  - [ ] 日足・1時間足・10分足チャート表示
  - [ ] 現在時刻が開始日時と一致
  - [ ] 残高が初期資金と一致
- **備考**:

#### SIM-003: 速度1x開始
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] チャートが1秒ごとに更新
  - [ ] 現在時刻が1秒=10分で進む
- **備考**:

#### SIM-004: 速度5x開始
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] チャートが0.2秒ごとに更新
  - [ ] 現在時刻が0.2秒=10分で進む
- **備考**:

#### SIM-005: 速度10x開始
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] チャートが0.1秒ごとに更新
  - [ ] 現在時刻が0.1秒=10分で進む
  - [ ] チャートが正常に更新（点滅なし）
- **備考**:

### 3.2 シミュレーション制御

#### SIM-006: 一時停止（1x）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] チャート更新停止
  - [ ] 現在時刻停止
  - [ ] 再開ボタン表示
- **備考**:

#### SIM-007: 一時停止（5x）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 即座にチャート更新停止
  - [ ] 10分足チャートも即座に停止
  - [ ] 数秒間更新が続かない
- **備考**:

#### SIM-008: 一時停止（10x）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 即座にチャート更新停止
  - [ ] 全てのチャートが即座に停止
- **備考**:

#### SIM-009: 再開
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] チャート更新再開
  - [ ] 現在時刻が進む
- **備考**:

#### SIM-010: 速度変更
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] チャート更新速度が5xに変更
  - [ ] チャート正常表示
- **備考**:

#### SIM-011: シミュレーション終了
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] シミュレーション停止
  - [ ] 結果ポップアップ表示
- **備考**:

---

## 4. チャート表示・更新テスト

### 4.1 マルチタイムフレーム表示

#### CHART-001: 3チャート同時表示
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 日足チャート表示
  - [ ] 1時間足チャート表示
  - [ ] 10分足チャート表示
- **備考**:

#### CHART-002: 各チャートのラベル
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 「日足」ラベル
  - [ ] 「1時間足」ラベル
  - [ ] 「10分足」ラベル
- **備考**:

#### CHART-003: ローソク足形状
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 始値・高値・安値・終値が正しく表示
  - [ ] 陽線は緑、陰線は赤
- **備考**:

### 4.2 チャート更新タイミング（10x速度）

#### CHART-004: 10分足更新
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 10分足チャートが新しいローソク足追加
- **備考**:

#### CHART-005: 1時間足更新
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 1時間足チャートが新しいローソク足追加
  - [ ] 60分経過時に正確に更新
- **備考**:

#### CHART-006: 日足更新（24:00）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 24:00（日付変更）時に日足チャートが新ローソク足追加
  - [ ] 点滅や重複なし
- **備考**:

#### CHART-007: 日足更新（複数日）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 毎日24:00に日足更新
  - [ ] 更新タイミングが一定
- **備考**:

### 4.3 チャート更新パフォーマンス

#### CHART-008: 10分足点滅なし（10x）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 10分足チャートが点滅せずスムーズに更新
- **備考**:

#### CHART-009: 1時間足点滅なし（10x）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 1時間足チャートが点滅せずスムーズに更新
- **備考**:

#### CHART-010: 日足点滅なし（10x）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 日足チャートが点滅せずスムーズに更新
- **備考**:

---

## 5. トレード機能テスト

### 5.1 注文機能

#### TRADE-001: 買い注文（成行）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 注文約定
  - [ ] ポジション一覧に表示
  - [ ] エントリー価格表示
- **備考**:

#### TRADE-002: 売り注文（成行）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 注文約定
  - [ ] ポジション一覧に表示
  - [ ] エントリー価格表示
- **備考**:

#### TRADE-003: 複数ロット注文
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 1.0ロットのポジション
  - [ ] 必要証拠金が正しく計算
- **備考**:

#### TRADE-004: 最小ロット注文
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 0.01ロットのポジション
- **備考**:

#### TRADE-005: 無効なロットサイズ
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] エラーメッセージ表示
- **備考**:

#### TRADE-006: 残高不足
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] エラーメッセージ表示
  - [ ] 注文が約定されない
- **備考**:

### 5.2 ポジション管理

#### TRADE-007: ポジション表示
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] ポジション一覧に1件表示
  - [ ] side: buy
  - [ ] lot_size: 入力値
  - [ ] entry_price: 約定価格
  - [ ] opened_at: 約定時刻
- **備考**:

#### TRADE-008: 含み損益表示
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] unrealized_pnlがプラス表示
  - [ ] current_price更新
- **備考**:

#### TRADE-009: 含み損失表示
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] unrealized_pnlがマイナス表示
  - [ ] 赤字で表示
- **備考**:

#### TRADE-010: 複数ポジション
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 両方のポジションが一覧に表示
  - [ ] 合計含み損益が正しく計算
- **備考**:

### 5.3 ポジション決済

#### TRADE-011: 利益確定決済
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] ポジション決済
  - [ ] realized_pnlがプラス
  - [ ] balance増加
  - [ ] トレード履歴に記録
- **備考**:

#### TRADE-012: 損切り決済
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] ポジション決済
  - [ ] realized_pnlがマイナス
  - [ ] balance減少
  - [ ] トレード履歴に記録
- **備考**:

#### TRADE-013: 複数決済
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 各ポジションが正しく決済
  - [ ] 残高が正しく更新
  - [ ] トレード履歴が3件記録
- **備考**:

---

## 6. 資金・損益管理テスト

#### ACCOUNT-001: 初期資金設定
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] balance（残高）が1,000,000円
- **備考**:

#### ACCOUNT-002: 残高更新（利益）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] balanceが1,010,000円
- **備考**:

#### ACCOUNT-003: 残高更新（損失）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] balanceが995,000円
- **備考**:

#### ACCOUNT-004: 証拠金計算
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] margin_used表示
  - [ ] margin_available計算
- **備考**:

#### ACCOUNT-005: 評価額計算
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] equity = balance + unrealized_pnl
- **備考**:

#### ACCOUNT-006: トレード履歴記録
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 全てのトレードが記録
  - [ ] 全ての項目が記録されている
- **備考**:

---

## 7. シミュレーション終了・結果表示テスト

#### RESULT-001: 結果ポップアップ表示
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 結果ポップアップ表示
  - [ ] 最終残高、総トレード数、確定損益表示
- **備考**:

#### RESULT-002: 保有ポジション自動決済
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 全ポジション自動決済
  - [ ] 決済損益が最終損益に反映
- **備考**:

#### RESULT-003: トレード0件の結果
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 結果ポップアップ表示
  - [ ] 総トレード数: 0
  - [ ] 最終残高 = 初期残高
- **備考**:

#### RESULT-004: CSV出力ボタン活性化
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] CSV出力ボタン活性化
  - [ ] クリック可能
- **備考**:

#### RESULT-005: CSV出力（トレードあり）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] CSVファイルダウンロード
  - [ ] 全項目記録されている
- **備考**:

#### RESULT-006: CSV出力（トレードなし）
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] CSVファイルダウンロード
  - [ ] ヘッダー行のみ
- **備考**:

---

## 8. データ管理テスト

#### DATA-001: CSV読込確認
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 3種類のCSVファイル存在
- **備考**:

#### DATA-002: データ日付範囲取得
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] start_date, end_date, timeframes返却
- **備考**:

#### DATA-003: ローソク足データ取得
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 1時間足データ返却
- **備考**:

---

## 9. エッジケース・エラーハンドリングテスト

#### EDGE-001: 未開始状態で注文
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] エラーメッセージ表示
- **備考**:

#### EDGE-002: 停止状態で注文
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] エラーメッセージ表示
- **備考**:

#### EDGE-003: 一時停止中に注文
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] 動作確認
- **備考**:

#### EDGE-004: データ範囲外の日時指定
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] エラーメッセージ表示
- **備考**:

#### EDGE-005: ブラウザリロード
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] シミュレーションリセット
  - [ ] 初期画面に戻る
- **備考**:

#### EDGE-006: 長時間実行
- **結果**: [ ] PASS [ ] FAIL [ ] 未実施
- **実施日時**:
- **確認項目**:
  - [ ] メモリリークなし
  - [ ] チャート正常動作継続
- **備考**:

---

## 10. APIテスト詳細結果 (2026-01-27実施)

### 10.1 環境確認
✅ **ENV-003: バックエンド接続** - PASS
- HTTP 200レスポンス確認
- Swagger UI (http://localhost:8000/docs) 正常表示

✅ **フロントエンド接続** - PASS (手動確認)
- HTTP 200レスポンス確認

### 10.2 データ管理API
✅ **DATA-002: データ日付範囲取得** - PASS
```json
{
  "success": true,
  "data": {
    "D1": {"start": "2020-10-06", "end": "2026-01-23", "count": 1048},
    "H1": {"start": "2023-05-12", "end": "2026-01-24", "count": 15853},
    "M10": {"start": "2024-12-22", "end": "2026-01-23", "count": 40090}
  }
}
```

✅ **DATA-003: ローソク足データ取得** - PASS
- H1, M10, D1の全タイムフレームで正常にデータ取得確認

### 10.3 シミュレーション基本機能API
✅ **SIM-002: シミュレーション開始** - PASS
```json
{
  "simulation_id": "d1fbb6fe-a5f1-460c-95e1-96e46dc74ebe",
  "status": "running",
  "current_time": "2024-12-23T00:00:00",
  "speed": 1.0,
  "balance": 1000000.0
}
```

✅ **GET /simulation/status** - PASS
- simulation_id, status, current_time, speed, balance, equity正常取得

✅ **SIM-011: シミュレーション終了** - PASS
```json
{
  "simulation_id": "d1fbb6fe-a5f1-460c-95e1-96e46dc74ebe",
  "status": "stopped",
  "final_balance": 1000000.0,
  "total_trades": 3,
  "profit_loss": 0.0
}
```

### 10.4 トレード機能API
✅ **TRADE-001: 買い注文（成行）** - PASS
```json
{
  "order_id": "b91aaeaa-dc76-4422-82fa-7be179d617df",
  "position_id": "6e523a48-958f-413f-af6a-00f8353cd58a",
  "side": "buy",
  "lot_size": 0.1,
  "entry_price": 156.447,
  "executed_at": "2024-12-23T00:00:00"
}
```

✅ **TRADE-002: 売り注文（成行）** - PASS
- 正常に売り注文が約定、position_id生成確認

✅ **TRADE-007: ポジション表示** - PASS
```json
{
  "positions": [{
    "position_id": "6e523a48-958f-413f-af6a-00f8353cd58a",
    "side": "buy",
    "lot_size": 0.1,
    "entry_price": 156.447,
    "current_price": 156.447,
    "unrealized_pnl": 0.0,
    "unrealized_pnl_pips": 0.0,
    "opened_at": "2024-12-23T00:00:00"
  }],
  "total_unrealized_pnl": 0.0
}
```

✅ **TRADE-011: ポジション決済** - PASS
```json
{
  "position_id": "6e523a48-958f-413f-af6a-00f8353cd58a",
  "trade_id": "a0b12d81-9376-463b-b621-283400f3d4a9",
  "side": "buy",
  "lot_size": 0.1,
  "entry_price": 156.447,
  "exit_price": 156.447,
  "realized_pnl": 0.0,
  "realized_pnl_pips": 0.0,
  "closed_at": "2024-12-23T00:00:00"
}
```

### 10.5 口座情報API
✅ **ACCOUNT-001: 口座情報取得** - PASS
```json
{
  "balance": 1000000.0,
  "equity": 1000000.0,
  "unrealized_pnl": 0,
  "realized_pnl": 0.0,
  "initial_balance": 1000000.0
}
```

### 10.6 シミュレーション終了後のデータ取得
✅ **RESULT-001: トレード履歴取得（終了後）** - PASS
- シミュレーション終了後もトレード履歴が正常に取得可能
- 3件のトレード（1件手動決済 + 2件自動決済）が記録されている

✅ **RESULT-001: 口座情報取得（終了後）** - PASS
- シミュレーション終了後も口座情報が正常に取得可能
- balance, equity, realized_pnl等が正しく返却される

✅ **RESULT-002: 保有ポジション自動決済** - PASS
- シミュレーション終了時に保有していた2件のポジションが自動決済された
- total_trades: 3 (1件手動 + 2件自動) と正しくカウントされている

### 10.7 エラーハンドリング
✅ **TRADE-005: 無効なロットサイズ（0）** - PASS
```json
{"detail": "Lot size must be between 0.01 and 100.0"}
```

✅ **TRADE-005: 無効なロットサイズ（負数）** - PASS
```json
{"detail": "Lot size must be between 0.01 and 100.0"}
```

### 10.8 APIテスト結果サマリー
- **総テストケース数**: 14
- **PASS**: 14
- **FAIL**: 0

---

## 11. 不具合一覧

| 不具合ID | テストID | 不具合内容 | 重要度 | 状態 | 発見日 | 修正日 |
|----------|----------|------------|--------|------|--------|--------|
| - | - | - | - | - | - | - |

---

## 11. テスト環境情報

### 11.1 ソフトウェアバージョン
- Docker:
- Docker Compose:
- Chrome:
- Node.js:
- Python:

### 11.2 テストデータ
- 日足データ: 2020-10-06 ～ 2026-01-23 (1048件)
- 1時間足データ: 2023-05-12 ～ 2026-01-24 (15853件)
- 10分足データ: 2024-12-22 ～ 2026-01-23 (40090件)

---

## 12. 総合評価

### 12.1 テスト結果サマリー
- [ ] 全ての優先度「高」テストがPASS
- [ ] 80%以上の優先度「中」テストがPASS
- [ ] クリティカルな不具合が0件

### 12.2 リリース判定
- [ ] リリース可
- [ ] 条件付きリリース可（条件: ）
- [ ] リリース不可

### 12.3 所見
（テスト全体を通しての所見・気づき・改善提案等を記載）

---

## 13. 承認

- **テスト実施者**: ________________ 日付: ________
- **テストレビュアー**: ________________ 日付: ________
- **承認者**: ________________ 日付: ________
